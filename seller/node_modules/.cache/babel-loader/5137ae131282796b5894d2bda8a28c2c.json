{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\william\\\\Desktop\\\\taso-taso\\\\seller\\\\src\\\\components\\\\seller_back\\\\pages\\\\ProductData.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport '../../../style/table.css';\nimport moment from 'moment';\nimport { withRouter } from 'react-router-dom';\nimport { MdAddCircle, MdModeEdit, MdDelete } from 'react-icons/md';\nimport { Button } from 'react-bootstrap';\nimport DataModal from '../../../components/DataModal';\nimport SellerSearch from '../SellerSearch';\nimport PaginacionTabla from '../PaginacionTabla';\n\nfunction ProductData(props) {\n  _s();\n\n  const sid = props.match.params.sid;\n  const [modalShow, setModalShow] = useState(false);\n  const [delUpdate, setDelUpdate] = useState(false);\n  const [inputSearch, setInputSearch] = useState('');\n  const [myData, setMydata] = useState([]);\n  const [wantDel, setwantDel] = useState(false);\n  const [mapSid, setMapSid] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [postsPerPage] = useState(4); // 設定頁碼\n\n  const indexOfLastPost = currentPage * postsPerPage;\n  const indexOfFirstPost = indexOfLastPost - postsPerPage;\n  const currentorder = myData.slice(indexOfFirstPost, indexOfLastPost);\n\n  const paginate = pageNumber => setCurrentPage(pageNumber);\n\n  const getData = async () => {\n    const res = await fetch('http://localhost:3000/product/ProductData', {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      })\n    });\n    const data = await res.json();\n    setMydata(data);\n  };\n\n  const delData = async sid => {\n    setDelUpdate(!delUpdate);\n    const res = await fetch('http://localhost:3000/product/del/' + sid, {\n      method: 'DELETE',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      })\n    });\n    const data = [...(await res.json())];\n\n    if (!data.sid) {\n      const newProducts = data.filter((v, i) => {\n        return v.sid !== sid;\n      });\n      setMydata(newProducts);\n    }\n  };\n\n  useEffect(() => {\n    getData();\n  }, [delUpdate, myData]);\n\n  const display = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u5546\\u54C1\\u5217\\u8868\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 8\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(PaginacionTabla, {\n      postsPerPage: postsPerPage,\n      totalPosts: myData.length,\n      paginate: paginate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      class: \"table table-striped   \",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          class: \"title\",\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"text-nowrap\",\n            children: \"\\u6D41\\u6C34\\u865F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"text-nowrap\",\n            children: \"\\u7522\\u54C1\\u540D\\u7A31\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"text-nowrap\",\n            children: \"\\u5B9A\\u50F9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"text-nowrap\",\n            children: \"\\u92B7\\u552E\\u50F9\\u683C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"text-nowrap\",\n            children: \"\\u4E0A\\u67B6\\u65E5\\u671F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"text-nowrap\",\n            children: \"\\u8FFD\\u8E64\\u4EBA\\u6578\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"text-nowrap\",\n            children: \"\\u5716\\u7247src\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"text-nowrap\",\n            children: \"\\u92B7\\u552E\\u6578\\u91CF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"text-nowrap\",\n            children: \"\\u5206\\u985E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            className: \"text-nowrap ctrl\",\n            children: \"\\u4FEE\\u6539\\u64CD\\u4F5C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: currentorder.map((v, i) => {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              width: \"15\",\n              className: \"sid\",\n              children: v.sid\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: v.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: v.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: v.Specialoffer\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: moment(v.Addedtime).format('YYYY-MM-DD ')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: v.star\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: v.awesome\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                style: v.imgurl ? {\n                  height: '180px',\n                  width: '160px'\n                } : {},\n                src: v.imgurl,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: v.Selling\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: v.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              class: \"bu\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"primary block\",\n                onClick: () => {\n                  props.history.push('/ProductEdit/' + v.sid);\n                },\n                children: [/*#__PURE__*/_jsxDEV(MdModeEdit, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 21\n                }, this), \" \\u7DE8\\u8F2F\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(DataModal, {\n                modalShow: modalShow,\n                setModalShow: setModalShow,\n                setwantDel: setwantDel,\n                delData: delData,\n                v: v,\n                myData: myData,\n                mapSid: mapSid,\n                setDelUpdate: setDelUpdate,\n                delUpdate: delUpdate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"danger block\",\n                onClick: () => {\n                  setModalShow(true);\n                  setMapSid(v.sid);\n                },\n                children: [/*#__PURE__*/_jsxDEV(MdDelete, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 21\n                }, this), \" \\u522A\\u9664\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 19\n              }, this), ' ']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 17\n            }, this)]\n          }, v.sid, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table\",\n      children: display\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 11\n    }, this)\n  }, void 0, false);\n}\n\n_s(ProductData, \"x8bNP/5EcPMxDlNN1BZjWL81Doo=\");\n\n_c = ProductData;\nexport default _c2 = withRouter(ProductData);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProductData\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/william/Desktop/taso-taso/seller/src/components/seller_back/pages/ProductData.js"],"names":["React","useState","useEffect","moment","withRouter","MdAddCircle","MdModeEdit","MdDelete","Button","DataModal","SellerSearch","PaginacionTabla","ProductData","props","sid","match","params","modalShow","setModalShow","delUpdate","setDelUpdate","inputSearch","setInputSearch","myData","setMydata","wantDel","setwantDel","mapSid","setMapSid","currentPage","setCurrentPage","postsPerPage","indexOfLastPost","indexOfFirstPost","currentorder","slice","paginate","pageNumber","getData","res","fetch","method","headers","Headers","Accept","data","json","delData","newProducts","filter","v","i","display","length","map","name","price","Specialoffer","Addedtime","format","star","awesome","imgurl","height","width","Selling","category","history","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport '../../../style/table.css'\r\nimport moment from 'moment'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { MdAddCircle, MdModeEdit, MdDelete } from 'react-icons/md'\r\nimport { Button } from 'react-bootstrap'\r\nimport DataModal from '../../../components/DataModal'\r\nimport SellerSearch from '../SellerSearch'\r\nimport PaginacionTabla from '../PaginacionTabla'\r\n\r\nfunction ProductData(props) {\r\n  const sid = props.match.params.sid\r\n  const [modalShow, setModalShow] = useState(false)\r\n  const [delUpdate, setDelUpdate] = useState(false)\r\n  \r\n  const [inputSearch, setInputSearch] = useState('')\r\n  const [myData, setMydata] = useState([])\r\n  const [wantDel, setwantDel] = useState(false)\r\n  const [mapSid, setMapSid] = useState('')\r\n\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [postsPerPage] = useState(4)\r\n\r\n  \r\n        // 設定頁碼\r\n        const indexOfLastPost = currentPage * postsPerPage\r\n        const indexOfFirstPost = indexOfLastPost - postsPerPage\r\n        const currentorder = myData.slice(indexOfFirstPost, indexOfLastPost)\r\n      \r\n        const paginate = (pageNumber) => setCurrentPage(pageNumber)\r\n\r\n\r\n  const getData = async () => {\r\n    const res = await fetch('http://localhost:3000/product/ProductData', {\r\n      method: 'GET',\r\n      headers: new Headers({\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n      }),\r\n    })\r\n    const data = await res.json()\r\n\r\n    setMydata(data)\r\n  }\r\n\r\n  const delData = async (sid) => {\r\n    setDelUpdate(!delUpdate)\r\n    const res = await fetch('http://localhost:3000/product/del/' + sid, {\r\n      method: 'DELETE',\r\n      headers: new Headers({\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n      }),\r\n    })\r\n    const data = [...(await res.json())]\r\n\r\n    if (!data.sid) {\r\n      const newProducts = data.filter((v, i) => {\r\n        return v.sid !== sid\r\n      })\r\n\r\n      setMydata(newProducts)\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    getData()\r\n  }, [delUpdate,myData])\r\n\r\n\r\n  const display = (\r\n\r\n    \r\n    <>\r\n\r\n<div className=\"container\">\r\n        <h3>商品列表</h3>\r\n       <hr />\r\n      </div>\r\n      <PaginacionTabla\r\n            postsPerPage={postsPerPage}\r\n            totalPosts={myData.length}\r\n            paginate={paginate}\r\n          />\r\n\r\n      <table class=\"table table-striped   \">\r\n        <thead>\r\n          <tr class=\"title\">\r\n            <th scope=\"col\" className=\"text-nowrap\">\r\n              流水號\r\n            </th>\r\n            <th scope=\"col\" className=\"text-nowrap\">\r\n              產品名稱\r\n            </th>\r\n            <th scope=\"col\" className=\"text-nowrap\">\r\n              定價\r\n            </th>\r\n            <th scope=\"col\" className=\"text-nowrap\">\r\n              銷售價格\r\n            </th>\r\n            <th scope=\"col\" className=\"text-nowrap\">\r\n              上架日期\r\n            </th>\r\n           \r\n           \r\n            <th scope=\"col\" className=\"text-nowrap\">\r\n              追蹤人數\r\n            </th>\r\n            <th scope=\"col\" className=\"text-nowrap\">\r\n              圖片src\r\n            </th>\r\n            <th scope=\"col\" className=\"text-nowrap\">\r\n              銷售數量\r\n            </th>\r\n            <th scope=\"col\" className=\"text-nowrap\">\r\n              分類\r\n            </th>\r\n            <th scope=\"col\" className=\"text-nowrap ctrl\">\r\n              修改操作\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {currentorder.map((v, i) => {\r\n            return (\r\n              <tr key={v.sid}>\r\n                <td width=\"15\" className=\"sid\">\r\n                  {v.sid}\r\n                </td>\r\n                <td>{v.name}</td>\r\n                <td>{v.price}</td>\r\n                <td>{v.Specialoffer}</td>\r\n                <td>{moment(v.Addedtime).format('YYYY-MM-DD ')}</td>\r\n               \r\n                <td>{v.star}</td>\r\n                <td>{v.awesome}</td>\r\n                <td>\r\n                  <img\r\n                    style={\r\n                      v.imgurl\r\n                        ? {\r\n                            height: '180px',\r\n                            width: '160px',\r\n                          }\r\n                        : {}\r\n                    }\r\n                    src={v.imgurl}\r\n                    alt=\"\"\r\n                  />\r\n                </td>\r\n                <td>{v.Selling}</td>\r\n                <td>{v.category}</td>\r\n                <td class=\"bu\">\r\n                  <Button\r\n                    variant=\"primary block\"\r\n                    onClick={() => {\r\n                      props.history.push('/ProductEdit/' + v.sid)\r\n                    }}\r\n                  >\r\n                 \r\n                    <MdModeEdit /> 編輯\r\n                  </Button>\r\n                  <DataModal\r\n                    modalShow={modalShow}\r\n                    setModalShow={setModalShow}\r\n                    setwantDel={setwantDel}\r\n                    delData={delData}\r\n                    v={v}\r\n                    myData={myData}\r\n                    mapSid={mapSid}\r\n                    setDelUpdate={setDelUpdate}\r\n                    delUpdate={delUpdate}\r\n                    \r\n                  />\r\n                  <Button\r\n                    variant=\"danger block\"\r\n                    onClick={() => {\r\n                      setModalShow(true)\r\n                      setMapSid(v.sid)\r\n                    }}\r\n                  >\r\n                    <MdDelete /> 刪除\r\n                  </Button>{' '}\r\n                </td>\r\n              </tr>\r\n            )\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </>\r\n  )\r\n  return (\r\n    <>\r\n\r\n          <div className=\"table\">{display}</div>\r\n    </>\r\n  )\r\n}\r\nexport default withRouter(ProductData)\r\n"]},"metadata":{},"sourceType":"module"}