{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\william\\\\Desktop\\\\taso-taso\\\\seller\\\\src\\\\components\\\\seller_back\\\\pages\\\\ProductEdit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport moment from 'moment';\n\nfunction ProductEdit(props) {\n  _s();\n\n  const [myData, setMydata] = useState([]);\n  const sid = props.match.params.sid;\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState('');\n  const [Specialoffer, setSpecialoffer] = useState('');\n  const [detail, setDetial] = useState('');\n  const [imgurl, setImgUrl] = useState('');\n  const [category, setCategory] = useState('');\n  const [photoFormdata, setphotoFormdata] = useState('');\n  const [editImgurl, seteditImgurl] = useState();\n\n  const changeCategory = e => {\n    setCategory(e.target.value);\n  };\n\n  const getproductData = async sid => {\n    const res = await fetch('http://localhost:3000/product/ProductData/' + sid, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      })\n    });\n    const data = await res.json();\n    setMydata(data);\n    console.log(data); //  const [name, setName] = useState('')\n    //  const [price, setPrice] = useState('')\n    //  const [Specialoffer, setSpecialoffer] = useState('')\n    //  const [detail, setDetial] = useState('')\n    //  const [imgurl, setImgUrl] = useState('')\n    //  const [category, setCategory] = useState('')\n\n    setName(data[0].name);\n    setPrice(data[0].price);\n    setSpecialoffer(data[0].Specialoffer);\n    setDetial(data[0].detail);\n    setImgUrl(data[0].imgurl);\n    setCategory(data[0].category);\n  };\n\n  const uploadPhoto = e => {\n    let file = e.target.files[0];\n    let photoName = file.name;\n    const photo = new FormData();\n    photo.append('imgurl', file);\n    setphotoFormdata(photo);\n    seteditImgurl(photoName);\n    console.log(photoName);\n  };\n\n  const imgdisplay = editImgurl ? /*#__PURE__*/_jsxDEV(\"img\", {\n    style: imgurl ? {\n      height: '160px',\n      width: '160px'\n    } : {},\n    src: 'http://localhost:3001/img/' + editImgurl,\n    alt: \"\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n    style: imgurl ? {\n      height: '160px',\n      width: '160px'\n    } : {},\n    src: imgurl,\n    alt: \"\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n\n  const updateData = async () => {\n    const newData = {\n      name,\n      price,\n      Specialoffer,\n      imgurl: 'http://localhost:3001/img/' + editImgurl,\n      category\n    };\n    const res = await fetch('http://localhost:3000/product/edit/' + sid, {\n      method: 'post',\n      body: JSON.stringify(newData),\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      })\n    });\n    const data = res.json();\n    alert('修改成功');\n    props.history.push('/ProductData');\n  };\n\n  useEffect(() => {\n    getproductData(sid);\n  }, []);\n\n  const display = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u5546\\u54C1\\u4FEE\\u6539\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 8\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"exampleFormControlInput1\",\n          children: \"\\u7522\\u54C1\\u540D\\u7A31\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          class: \"form-control\",\n          id: \"exampleFormControlInput1\",\n          placeholder: \"name@example.com\",\n          value: name,\n          onChange: e => {\n            setName(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"exampleFormControlInput2\",\n          children: \"\\u50F9\\u683C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          class: \"form-control\",\n          id: \"exampleFormControlInput2\",\n          placeholder: \"name@example.com\",\n          value: price,\n          onChange: e => {\n            setPrice(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"exampleFormControlInput3\",\n          children: \"\\u5B9A\\u50F9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          class: \"form-control\",\n          id: \"exampleFormControlInput3\",\n          placeholder: \"name@example.com\",\n          value: Specialoffer,\n          onChange: e => {\n            setSpecialoffer(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"exampleFormControlInput5\",\n          children: \"\\u5716\\u7247\\u8DEF\\u5F91 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          class: \"form-control\",\n          id: \"exampleFormControlInput5\",\n          placeholder: \"name@example.com\",\n          onChange: uploadPhoto\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), imgdisplay]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"exampleFormControlSelect1\",\n          children: \"\\u7522\\u54C1\\u5206\\u985E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: category,\n          onChange: changeCategory,\n          class: \"form-control\",\n          id: \"exampleFormControlSelect1\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"1\",\n            children: \"\\u8EAB\\u9AD4\\u6E05\\u6F54\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"2\",\n            children: \"\\u81C9\\u90E8\\u4FDD\\u990A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"3\",\n            children: \"\\u982D\\u9AEE\\u8B77\\u7406\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"4\",\n            children: \"\\u5F69\\u599D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      class: \"btn btn-primary\",\n      onClick: () => {\n        updateData();\n      },\n      children: \"\\u9001\\u51FA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: display\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(ProductEdit, \"jWF7LODkiq698R7+G8FglAEzYow=\");\n\n_c = ProductEdit;\nexport default _c2 = withRouter(ProductEdit);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProductEdit\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/william/Desktop/taso-taso/seller/src/components/seller_back/pages/ProductEdit.js"],"names":["React","useState","useEffect","withRouter","moment","ProductEdit","props","myData","setMydata","sid","match","params","name","setName","price","setPrice","Specialoffer","setSpecialoffer","detail","setDetial","imgurl","setImgUrl","category","setCategory","photoFormdata","setphotoFormdata","editImgurl","seteditImgurl","changeCategory","e","target","value","getproductData","res","fetch","method","headers","Headers","Accept","data","json","console","log","uploadPhoto","file","files","photoName","photo","FormData","append","imgdisplay","height","width","updateData","newData","body","JSON","stringify","alert","history","push","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport moment from 'moment'\r\nfunction ProductEdit(props) {\r\n  const [myData, setMydata] = useState([])\r\n  const sid = props.match.params.sid\r\n  const [name, setName] = useState('')\r\n  const [price, setPrice] = useState('')\r\n  const [Specialoffer, setSpecialoffer] = useState('')\r\n  const [detail, setDetial] = useState('')\r\n  const [imgurl, setImgUrl] = useState('')\r\n  const [category, setCategory] = useState('')\r\n  const [photoFormdata, setphotoFormdata] = useState('')\r\n  const [editImgurl, seteditImgurl] = useState()\r\n\r\n  const changeCategory = (e) => {\r\n    setCategory(e.target.value)\r\n  }\r\n  const getproductData = async (sid) => {\r\n    const res = await fetch(\r\n      'http://localhost:3000/product/ProductData/' + sid,\r\n      {\r\n        method: 'GET',\r\n        headers: new Headers({\r\n          Accept: 'application/json',\r\n          'Content-Type': 'application/json',\r\n        }),\r\n      }\r\n    )\r\n    const data = await res.json()\r\n    setMydata(data)\r\n    console.log(data)\r\n    //  const [name, setName] = useState('')\r\n    //  const [price, setPrice] = useState('')\r\n    //  const [Specialoffer, setSpecialoffer] = useState('')\r\n    //  const [detail, setDetial] = useState('')\r\n    //  const [imgurl, setImgUrl] = useState('')\r\n    //  const [category, setCategory] = useState('')\r\n    setName(data[0].name)\r\n    setPrice(data[0].price)\r\n    setSpecialoffer(data[0].Specialoffer)\r\n    setDetial(data[0].detail)\r\n    setImgUrl(data[0].imgurl)\r\n    setCategory(data[0].category)\r\n  }\r\n  const uploadPhoto = (e) => {\r\n    let file = e.target.files[0]\r\n    let photoName = file.name\r\n    const photo = new FormData()\r\n    photo.append('imgurl', file)\r\n    setphotoFormdata(photo)\r\n    seteditImgurl(photoName)\r\n    console.log(photoName)\r\n  }\r\n  const imgdisplay = editImgurl ? (\r\n    <img\r\n      style={\r\n        imgurl\r\n          ? {\r\n              height: '160px',\r\n              width: '160px',\r\n            }\r\n          : {}\r\n      }\r\n      src={'http://localhost:3001/img/' + editImgurl}\r\n      alt=\"\"\r\n    />\r\n  ) : (\r\n    <img\r\n      style={\r\n        imgurl\r\n          ? {\r\n              height: '160px',\r\n              width: '160px',\r\n            }\r\n          : {}\r\n      }\r\n      src={imgurl}\r\n      alt=\"\"\r\n    />\r\n  )\r\n\r\n  const updateData = async () => {\r\n    const newData = {\r\n      name,\r\n      price,\r\n      Specialoffer,\r\n      imgurl: 'http://localhost:3001/img/' + editImgurl,\r\n      category,\r\n    }\r\n    const res = await fetch('http://localhost:3000/product/edit/' + sid, {\r\n      method: 'post',\r\n      body: JSON.stringify(newData),\r\n      headers: new Headers({\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n      }),\r\n    })\r\n    const data = res.json()\r\n    alert('修改成功')\r\n    props.history.push('/ProductData')\r\n  }\r\n\r\n  useEffect(() => {\r\n    getproductData(sid)\r\n  }, [])\r\n  const display = (\r\n    <>\r\n    <div className=\"container\">\r\n        <h3>商品修改</h3>\r\n       <hr />\r\n      </div>\r\n\r\n      <form>\r\n        <div class=\"form-group\">\r\n          <label for=\"exampleFormControlInput1\">產品名稱</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            id=\"exampleFormControlInput1\"\r\n            placeholder=\"name@example.com\"\r\n            value={name}\r\n            onChange={(e) => {\r\n              setName(e.target.value)\r\n            }}\r\n          />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"exampleFormControlInput2\">價格</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            id=\"exampleFormControlInput2\"\r\n            placeholder=\"name@example.com\"\r\n            value={price}\r\n            onChange={(e) => {\r\n              setPrice(e.target.value)\r\n            }}\r\n          />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"exampleFormControlInput3\">定價</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            id=\"exampleFormControlInput3\"\r\n            placeholder=\"name@example.com\"\r\n            value={Specialoffer}\r\n            onChange={(e) => {\r\n              setSpecialoffer(e.target.value)\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"exampleFormControlInput5\">圖片路徑 </label>\r\n          <input\r\n            type=\"file\"\r\n            class=\"form-control\"\r\n            id=\"exampleFormControlInput5\"\r\n            placeholder=\"name@example.com\"\r\n            onChange={uploadPhoto}\r\n          />\r\n          {imgdisplay}\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"exampleFormControlSelect1\">產品分類</label>\r\n          <select\r\n            value={category}\r\n            onChange={changeCategory}\r\n            class=\"form-control\"\r\n            id=\"exampleFormControlSelect1\"\r\n          >\r\n            <option value=\"1\">身體清潔</option>\r\n            <option value=\"2\">臉部保養</option>\r\n            <option value=\"3\">頭髮護理</option>\r\n            <option value=\"4\">彩妝</option>\r\n          </select>\r\n        </div>\r\n      </form>\r\n      <button\r\n        type=\"button\"\r\n        class=\"btn btn-primary\"\r\n        onClick={() => {\r\n          updateData()\r\n        }}\r\n      >\r\n        送出\r\n      </button>\r\n    </>\r\n  )\r\n  return (\r\n    <>\r\n      <div className=\"container\">{display}</div>\r\n    </>\r\n  )\r\n}\r\nexport default withRouter(ProductEdit)"]},"metadata":{},"sourceType":"module"}