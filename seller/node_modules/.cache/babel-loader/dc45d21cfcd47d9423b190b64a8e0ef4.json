{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\william\\\\Desktop\\\\taso-taso\\\\seller\\\\src\\\\components\\\\seller_back\\\\pages\\\\OrderEdit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport '../../../style/login.css';\nimport '../../../style/55.css';\n\nfunction OrderEdit(props) {\n  _s();\n\n  const Order_id = props.match.params.Order_id; // const [user, setUser] = useState({})\n\n  const [dataLoading, setDataLoading] = useState(false);\n  const [Mydata, setMydata] = useState('');\n  const [Member_name, setMember_name] = useState('');\n  const [Order_TotalPrice, setOrder_TotalPrice] = useState('');\n  const [Order_CreatedTime, setOrder_CreatedTime] = useState('');\n  const [Order_pay, setOrder_Pay] = useState('');\n  const [Order_State, setOrder_State] = useState(''); // let fd = null\n\n  const [userDataIsExist, setUserDataIsExist] = useState(true); // useEffect(()=>{fd= new FormData(document.form1)},[])\n\n  async function getUserFromServer(Order_id) {\n    // 開啟載入指示\n    setDataLoading(true); // 連接的伺服器資料網址\n\n    const url = 'http://localhost:3000/seller/sellerOrder/' + Order_id; // 注意header資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json();\n    setMydata(data);\n    console.log(data); //要詢問老師為甚麼一定要加data[0]才讀到資料\n\n    setMember_name(data[0].Member_name);\n    setOrder_TotalPrice(data[0].Order_TotalPrice);\n    setOrder_CreatedTime(data[0].Order_CreatedTime);\n    setOrder_Pay(data[0].Order_pay);\n    setOrder_State(data[0].Order_State); // 如果從伺服器回傳的資料沒有id值\n\n    if (!data.Order_id) {\n      setUserDataIsExist(false);\n      return;\n    }\n\n    setMember_name(data.member_name);\n    setOrder_TotalPrice(data.order_totalprice);\n    setOrder_CreatedTime(data.order_createdtime);\n    setOrder_Pay(data.order_pay);\n    setOrder_State(data.order_state);\n  }\n\n  async function updateUserToSever() {\n    // 開啟載入指示\n    setDataLoading(true);\n    const newData = {\n      Member_name,\n      Order_TotalPrice,\n      Order_CreatedTime,\n      Order_pay,\n      Order_State\n    }; // 連接的伺服器資料網址\n\n    const url = 'http://localhost:3000/seller/sellerOrder/:Order_id'; // 注意資料格式要設定，伺服器才知道是json格式\n\n    const request = new Request(url, {\n      method: 'PUT',\n      body: JSON.stringify(newData),\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json(); //直接在一段x秒關掉指示器\n\n    setTimeout(() => {\n      setDataLoading(false);\n    }, 1000);\n  } // 一開始就會開始載入資料\n\n\n  useEffect(() => {\n    getUserFromServer(Order_id);\n  }, []); // 每次users資料有變動就會X秒後關掉載入指示\n\n  useEffect(() => {\n    setTimeout(() => {\n      setDataLoading(false);\n    }, 1000);\n  }, []);\n\n  const sendData = async () => {\n    // const fd = new FormData(document.form1);\n    const newData = {\n      \"member_name\": Member_name,\n      \"order_TotalPrice\": Order_TotalPrice,\n      \"order_createdtime\": Order_CreatedTime,\n      \"order_pay\": Order_pay,\n      \"order_state\": Order_State\n    };\n    const fd = JSON.stringify(newData); // console.log(fd)\n    // const fd = new FormData(formData);\n\n    const res = await fetch('http://localhost:3000/seller/OrderEdit/' + Order_id, {\n      method: 'post',\n      headers: new Headers({\n        'Accept': 'application/json',\n        'Content-Type': 'application/json; charset=UTF-8'\n      }),\n      body: fd\n    });\n    const data = res.json();\n    setMydata(data); // console.log(data)\n\n    alert('修改成功');\n    props.history.push('/Order');\n  };\n\n  const loading = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-border\",\n        role: \"order_state\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"sr-only\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n\n  const display = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form1 \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"exampleInputEmail1\",\n          children: \"\\u59D3\\u540D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"Member_name\",\n          type: \"text\",\n          className: \"form-control\",\n          value: Member_name,\n          onChange: event => {\n            setMember_name(event.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"exampleInputEmail1\",\n          children: \"\\u50F9\\u683C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"Amount\",\n          type: \"text\",\n          className: \"form-control\",\n          value: Order_TotalPrice,\n          onChange: event => {\n            setOrder_TotalPrice(event.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"exampleInputEmail1\",\n          children: \"\\u65E5\\u671F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"Time\",\n          type: \"text\",\n          className: \"form-control\",\n          \"name-\": true,\n          value: Order_CreatedTime,\n          onChange: event => {\n            setOrder_CreatedTime(event.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"exampleInputEmail1\",\n          children: \"\\u4ED8\\u6B3E\\u72C0\\u614B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"ShippingMethods\",\n          type: \"text\",\n          className: \"form-control\",\n          value: Order_pay,\n          onChange: event => {\n            setOrder_Pay(event.target.value);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"a10\",\n            children: \"\\u4FE1\\u7528\\u5361\\u5C1A\\u672A\\u4ED8\\u6B3E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"a20\",\n            children: \"\\u4FE1\\u7528\\u5361\\u5DF2\\u4ED8\\u6B3E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"a30\",\n            children: \"\\u8D85\\u53D6\\u8F49\\u5E33\\u5C1A\\u672A\\u4ED8\\u6B3E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"a40\",\n            children: \"\\u8D85\\u53D6\\u8F49\\u5E33\\u5DF2\\u4ED8\\u6B3E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"a50\",\n            children: \"\\u8D85\\u5546\\u53D6\\u8CA8\\u4ED8\\u6B3E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"e10\",\n            children: \"\\u90F5\\u5BC4\\u4FE1\\u7528\\u5361\\u672A\\u4ED8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"e20\",\n            children: \"\\u90F5\\u5BC4\\u4FE1\\u7528\\u5361\\u5DF2\\u4ED8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"e30\",\n            children: \"\\u90F5\\u5BC4\\u8F49\\u5E33\\u672A\\u4ED8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"e40\",\n            children: \"\\u90F5\\u5BC4\\u8F49\\u5E33\\u5DF2\\u4ED8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"exampleInputEmail1\",\n          children: \"\\u5305\\u88F9\\u72C0\\u614B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"form-control\",\n          value: Order_State,\n          onChange: event => {\n            setOrder_State(event.target.value);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"1\",\n            children: \"\\u5C1A\\u672A\\u4ED8\\u6B3E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"2\",\n            children: \"\\u8655\\u7406\\u4E2D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"3\",\n            children: \"\\u5F85\\u6536\\u8CA8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"4\",\n            children: \"\\u5DF2\\u5B8C\\u6210\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"5\",\n            children: \"\\u5DF2\\u53D6\\u6D88\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"loginInfo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          sendData();\n        },\n        className: \"btn btn-primary\",\n        children: \"\\u5132\\u5B58\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u8A02\\u55AE\\u7DE8\\u8F2F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 5\n    }, this), dataLoading ? loading : display]\n  }, void 0, true);\n}\n\n_s(OrderEdit, \"5knx9enDx3nscrxJZ2zSfYFN4Zo=\");\n\n_c = OrderEdit;\nexport default _c2 = withRouter(OrderEdit);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"OrderEdit\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/william/Desktop/taso-taso/seller/src/components/seller_back/pages/OrderEdit.js"],"names":["React","useState","useEffect","withRouter","OrderEdit","props","Order_id","match","params","dataLoading","setDataLoading","Mydata","setMydata","Member_name","setMember_name","Order_TotalPrice","setOrder_TotalPrice","Order_CreatedTime","setOrder_CreatedTime","Order_pay","setOrder_Pay","Order_State","setOrder_State","userDataIsExist","setUserDataIsExist","getUserFromServer","url","request","Request","method","headers","Headers","Accept","response","fetch","data","json","console","log","member_name","order_totalprice","order_createdtime","order_pay","order_state","updateUserToSever","newData","body","JSON","stringify","setTimeout","sendData","fd","res","alert","history","push","loading","display","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport '../../../style/login.css'\r\nimport '../../../style/55.css'\r\n\r\n\r\nfunction OrderEdit(props) {\r\n    const Order_id = props.match.params.Order_id\r\n   \r\n  \r\n    // const [user, setUser] = useState({})\r\n    const [dataLoading, setDataLoading] = useState(false)\r\n    const [Mydata,setMydata] = useState('')\r\n\r\n    const [Member_name,setMember_name] = useState('')\r\n    const [Order_TotalPrice, setOrder_TotalPrice] = useState('')\r\n    const [Order_CreatedTime, setOrder_CreatedTime] = useState('')\r\n    const [Order_pay, setOrder_Pay] = useState('')\r\n    const [Order_State, setOrder_State] = useState('')\r\n    // let fd = null\r\n\r\n    const [userDataIsExist, setUserDataIsExist] = useState(true)\r\n    // useEffect(()=>{fd= new FormData(document.form1)},[])\r\n    async function getUserFromServer(Order_id) {\r\n        // 開啟載入指示\r\n        setDataLoading(true)\r\n    \r\n        // 連接的伺服器資料網址\r\n        const url = 'http://localhost:3000/seller/sellerOrder/'+ Order_id\r\n    \r\n        // 注意header資料格式要設定，伺服器才知道是json格式\r\n        const request = new Request(url, {\r\n          method: 'GET',\r\n          headers: new Headers({\r\n            Accept: 'application/json',\r\n            'Content-Type': 'appliaction/json',\r\n          }),\r\n          \r\n        })\r\n    \r\n        const response = await fetch(request)\r\n        const data = await response.json()\r\n        setMydata(data)\r\n        console.log(data)\r\n        //要詢問老師為甚麼一定要加data[0]才讀到資料\r\n        setMember_name(data[0].Member_name)\r\n        setOrder_TotalPrice(data[0].Order_TotalPrice)\r\n        setOrder_CreatedTime(data[0].Order_CreatedTime)\r\n        setOrder_Pay(data[0].Order_pay)\r\n        setOrder_State(data[0].Order_State)\r\n\r\n \r\n    \r\n        // 如果從伺服器回傳的資料沒有id值\r\n        if (!data.Order_id) {\r\n          setUserDataIsExist(false)\r\n          return\r\n        }\r\n      \r\n\r\n        setMember_name(data.member_name)\r\n        setOrder_TotalPrice(data.order_totalprice)\r\n        setOrder_CreatedTime(data.order_createdtime)\r\n        setOrder_Pay(data.order_pay)\r\n        setOrder_State(data.order_state)\r\n\r\n\r\n        \r\n      }\r\n      \r\n\r\n\r\n    \r\n      async function updateUserToSever() {\r\n\r\n        // 開啟載入指示\r\n        setDataLoading(true)\r\n    \r\n        const newData = { Member_name, Order_TotalPrice, Order_CreatedTime, Order_pay, Order_State}\r\n    \r\n        // 連接的伺服器資料網址\r\n        const url = 'http://localhost:3000/seller/sellerOrder/:Order_id'\r\n    \r\n        // 注意資料格式要設定，伺服器才知道是json格式\r\n        const request = new Request(url, {\r\n          method: 'PUT',\r\n          body: JSON.stringify(newData),\r\n          headers: new Headers({\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n          }),\r\n        })\r\n    \r\n       \r\n\r\n        const response = await fetch(request)\r\n        const data = await response.json()\r\n   \r\n        \r\n    \r\n        //直接在一段x秒關掉指示器\r\n        setTimeout(() => {\r\n          setDataLoading(false)\r\n        }, 1000)\r\n\r\n  \r\n      }\r\n\r\n        // 一開始就會開始載入資料\r\n  useEffect(() => {\r\n    getUserFromServer(Order_id)\r\n  }, [])\r\n\r\n  // 每次users資料有變動就會X秒後關掉載入指示\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      setDataLoading(false)\r\n    }, 1000)\r\n  }, [])\r\n\r\n\r\n  \r\n\r\n  const sendData= async () => {\r\n    \r\n// const fd = new FormData(document.form1);\r\nconst newData = { \r\n  \"member_name\": Member_name, \r\n  \"order_TotalPrice\": Order_TotalPrice,\r\n  \"order_createdtime\": Order_CreatedTime,\r\n  \"order_pay\": Order_pay,\r\n  \"order_state\": Order_State }\r\nconst fd = JSON.stringify(newData)\r\n// console.log(fd)\r\n// const fd = new FormData(formData);\r\nconst res = await fetch('http://localhost:3000/seller/OrderEdit/'+Order_id, {\r\n  method: 'post',\r\n  headers: new Headers({\r\n    'Accept': 'application/json',\r\n    'Content-Type': 'application/json; charset=UTF-8',\r\n   \r\n  }),\r\n  body:fd\r\n})\r\n\r\n    const data = res.json()\r\n    setMydata(data)\r\n    // console.log(data)\r\n    alert('修改成功')\r\n    props.history.push('/Order')\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  const loading = (\r\n    <>\r\n      <div className=\"d-flex justify-content-center\">\r\n        <div className=\"spinner-border\" role=\"order_state\">\r\n          <span className=\"sr-only\">Loading...</span>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n\r\n  const display = (\r\n    <>\r\n    <form className=\"form1 \">\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"exampleInputEmail1\">姓名</label>\r\n          <input\r\n            name = \"Member_name\"\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            value={Member_name}\r\n            onChange={(event) => {\r\n              setMember_name(event.target.value)\r\n              \r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"exampleInputEmail1\">價格</label>\r\n          <input\r\n            name = \"Amount\"\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            value={Order_TotalPrice}\r\n            onChange={(event) => {\r\n              setOrder_TotalPrice(event.target.value)\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"exampleInputEmail1\">日期</label>\r\n          <input\r\n            name = \"Time\"\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            name-\r\n            value={Order_CreatedTime}\r\n            onChange={(event) => {\r\n              setOrder_CreatedTime(event.target.value)\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"exampleInputEmail1\">付款狀態</label>\r\n          <select\r\n            name = \"ShippingMethods\"\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            value={Order_pay}\r\n            onChange={(event) => {\r\n              setOrder_Pay(event.target.value)\r\n            }}\r\n          >\r\n           <option value=\"a10\">信用卡尚未付款</option>\r\n            <option value=\"a20\">信用卡已付款</option>\r\n            <option value=\"a30\">超取轉帳尚未付款</option>\r\n            <option value=\"a40\">超取轉帳已付款</option>\r\n            <option value=\"a50\">超商取貨付款</option>\r\n            <option value=\"e10\">郵寄信用卡未付</option>\r\n            <option value=\"e20\">郵寄信用卡已付</option>\r\n            <option value=\"e30\">郵寄轉帳未付</option>\r\n            <option value=\"e40\">郵寄轉帳已付</option>\r\n            \r\n            </select>\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"exampleInputEmail1\">包裹狀態</label>\r\n          <select\r\n          className=\"form-control\"\r\n          value={Order_State}      \r\n          onChange={(event) => {\r\n          setOrder_State(event.target.value)\r\n          }}\r\n          >\r\n            <option value=\"1\">尚未付款</option>\r\n            <option value=\"2\">處理中</option>\r\n            <option value=\"3\">待收貨</option>\r\n            <option value=\"4\">已完成</option>\r\n            <option value=\"5\">已取消</option>\r\n          </select>\r\n        </div>\r\n        <p id=\"loginInfo\"></p>\r\n    \r\n        <button\r\n          onClick={() => {\r\n            sendData()\r\n          }}\r\n          className=\"btn btn-primary\"\r\n        >\r\n          儲存\r\n        </button>\r\n    </form>\r\n      </>\r\n  )\r\n  \r\nreturn (\r\n  <>\r\n    <h3>訂單編輯</h3>\r\n    <hr />\r\n    {dataLoading ? loading : display}\r\n  </>\r\n)\r\n    }\r\n\r\nexport default withRouter(OrderEdit)"]},"metadata":{},"sourceType":"module"}